<!DOCTYPE html>
<html>
<head>
    <!-- CSS 파일 참조 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <!-- JavaScript 파일 참조 -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

    <title>YouTube Channel Video Links</title>
</head>
<body>
    <!-- 설명 -->
    <h1>Enter YouTube Channel ID</h1>
    <p>궁금한 유튜브 채널에서 "채널 자세히 알아보기"를 클릭하세요.</p>
    <p>"채널 공유"를 클릭하세요.</p>
    <p>"채널 ID 복사"를 클릭하세요.</p>
    <p>이제 복사된 채널 ID를 아래 빈칸에 붙여넣기해 주세요!</p>

     <!-- 로딩 애니메이션 -->
    <div id="loadingAnimation" style="display: none;">
        <div class="loader"></div>
    </div>

    <!-- 폼 -->
    <form method="POST" action="/" onsubmit="handleSubmit()">
        <input type="text" name="channel_id" placeholder="Channel ID">
        <input type="submit" id="getVideosButton" value="Get Videos">
    </form>

    <!-- 비디오 링크 그리드 컨테이너 -->
    {% if data.channel_id %}
        <h2>Video Links:</h2>
        <h5>채널 ID {{ data.channel_id }}의 정보가 표시됩니다.</h5>
        {% if data.videos %}
            <div class="grid-container">
                {% for video in data.videos %}
                <div class="card">
                    <a href="{{ video.link }}" class="video-link">{{ video.title }}</a>
                    <a href="/download/{{ data.channel_id }}/{{ video.video_id }}" class="download-link">Download Subtitle</a>
                    <!--mongodb 버전이었다. 제목을 누르면 바로 다운로드가 되는 코드-->
                    <!--<a href="/download/{{ video.id }}">{{ video.title }}</a>-->
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No videos found for this channel.</p>
        {% endif %}
    {% endif %}

    {% if videos and channel_id %}
        <h2>JSON Data:</h2>
        <pre>{{ data.videos_json }}</pre>
        <h2>Video Links(by SQLite):</h2>
        <h5>채널 ID와 각 동영상의 정보가 'info_{{ channel_id }}.json' 파일로 저장되었습니다.</h5>
        <ul>
            {% for video in videos %}
                <li><a href="{{ video }}">{{ video }}</a></li>
            {% endfor %}
        </ul>
    {% endif %}

     <!-- 오류 메시지 표시 -->
    {% if data.error %}
        <div class="error-message">
            {{ data.error }}
        </div>
    {% endif %}

</body>
</html>
